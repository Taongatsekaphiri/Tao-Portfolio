<%- include('partials/header', { page: 'contact', pageStyles:
 '<link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/contact.css">' }) %>


<a href="javascript:history.back()" class="back-btn">← Back</a>


<div class="contact-page">

    <div class="contact-left">
        <h1>Let's Build Something Remarkable</h1>
        <p>Feeling social? Find me on these online spaces too!</p>
        <ul class="contact-info">
            <li>Email: <a href="mailto:info@yourdomain.com">tsekaphiritaonga@gmail.com</a></li>
            <li>Phone: <a href="tel:+265998888020">+265 99888820</a></li>
            <li>Location: Lilongwe, Malawi</li>
        </ul>
        <div class="social-links">
            <span>Follow Me:</span>
            <a href="https://github.com/taongatsekaphiri" target="_blank">GitHub</a>
            <a href="https://linkedin.com/in/taonga-tseka-phiri" target="_blank">LinkedIn</a>
        </div>
    </div>

    <div class="contact-right">
        <div class="form-card">
            <h2>Send a Message</h2>
            <form id="contactForm" class="contact-form">
                <div class="form-group">
                    <input type="text" name="name" placeholder=" " required>
                    <label>Full Name</label>
                </div>
                <div class="form-group">
                    <input type="email" name="email" placeholder=" " required>
                    <label>Email</label>
                </div>
                <div class="form-group">
                    <input type="text" name="subject" placeholder=" " required>
                    <label>Subject</label>
                </div>
                <div class="form-group">
                    <textarea name="message" placeholder=" " required></textarea>
                    <label>Your Message</label>
                </div>
                <button type="submit" class="submit-btn">Send</button>
            </form>

            <!-- Success Message with Checkmark -->
            <div id="formMessage" class="success-msg" style="display: none; flex-direction: column; align-items: center; gap: 10px;">
                <svg width="50" height="50" viewBox="0 0 24 24">
                    <path fill="none" stroke="#10b981" stroke-width="3" d="M4 12l6 6L20 6"/>
                </svg>
                <span>Message sent successfully! I will get back to you soon.</span>
                <button id="sendAnother" class="submit-btn" style="margin-top: 10px;">Send Another Message</button>
            </div>
        </div>
    </div>

</div>

<footer>
    © Taonga Tseka Phiri <%= new Date().getFullYear() %> | Crafted with Precision
</footer>

<script>
const form = document.getElementById('contactForm');
const formMessage = document.getElementById('formMessage');
const sendAnother = document.getElementById('sendAnother');

form.addEventListener('submit', function(e) {
    e.preventDefault();
    const formData = new FormData(form);

    fetch('/contact', {
        method: 'POST',
        body: formData
    })
    .then(response => response.text())
    .then(data => {
        form.style.display = 'none';
        formMessage.style.display = 'flex';
    })
    .catch(error => {
        alert('Oops! Something went wrong. Please try again.');
        console.error(error);
    });
});

// Show form again if user wants to send another message
sendAnother.addEventListener('click', function() {
    form.reset();
    form.style.display = 'block';
    formMessage.style.display = 'none';
});
</script>
